{% extends "base.html" %}

{% block title %}NetFang Router Admin - {{ g.t.login_failed }}{% endblock %}

{% block extra_css %}
<style>
   .error-banner {
  background-color: #ffcccc;
  border: 1px solid #cc0000;
  border-radius: 5px;
  padding: 1rem;
  margin-bottom: 1rem;
  text-align: center;
  color: #cc0000;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
}

.error-banner h2 {
  margin: 0 0 0.5rem 0;
}

.error-banner p {
  margin: 0;
}
</style>
{% endblock %}

{% block content %}
<section class="login-section">
  <div class="error-banner">
    <h2>{{ g.t.login_failed }}</h2>
    <p>
      {{ g.t.incorrect_credentials }}
    </p>
  </div>
  <div class="incident-report">
    <p>
      {{ g.t.incident_reported }}
    </p>
    <div id="ip-section" style="display: none;">
      <p>
        {{ g.t.your_ip }}
        <strong id="user-ip"></strong>
      </p>
    </div>
  </div>
  <form method="POST" action="/login">
    <label for="username">{{ g.t.username }}</label>
    <input type="text" id="username" name="username" autocomplete="username" required />

    <label for="password">{{ g.t.password }}</label>
    <input type="password" id="password" name="password" autocomplete="current-password" required />

    <button type="submit">
      {{ g.t.try_again }}
    </button>
  </form>
</section>
{% endblock %}

{% block scripts %}
<script>
  // Fetch the user's IP address and display it
  async function fetchIP() {
    try {
      const response = await fetch('https://api.ipify.org?format=json');
      const data = await response.json();
      document.getElementById('user-ip').textContent = data.ip;
      document.getElementById('ip-section').style.display = 'block';
    } catch (error) {
      console.error('Failed to fetch IP address:', error);
    }
  }
  window.onload = fetchIP;
</script>
{% endblock %}

.incident-report {
  background-color: #fff6f6;
  border: 1px dashed #cc0000;
  border-radius: 5px;
  padding: 0.5rem;
  margin-bottom: 1rem;
  text-align: center;
  color: #990000;
}

.incident-report p {
  margin: 0.25rem 0;
}

form input[type="text"],
form input[type="password"] {
  border: 1px solid #cc0000;
}

form input[type="text"]:focus,
form input[type="password"]:focus {
  outline-color: #cc0000;
}

button {
  background-color: #cc0000;
}

button:hover {
  background-color: #990000;
}

</style>
